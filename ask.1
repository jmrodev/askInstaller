.\" Manpage for ask
.\" Contact tu_email@example.com para reportar bugs.
.TH ask 1 "21 Mayo 2024" "1.0.0" "ask Manual"

.SH NAME
ask \- Interactuar con la API de Gemini de Google desde la terminal.

.SH SYNOPSIS
.B ask
[\fIOPCIONES_CONSULTA\fR] \fIPREGUNTA_O_TEXTO\fR
.br
.B ask
\fB\-\-clean\fR \fIOBJETIVO\fR
.br
.B ask
\fB\-\-save\-local\fR \fI"TEXTO A GUARDAR"\fR
.br
.B ask
\fB\-\-append\-local\fR \fI"TEXTO A AGREGAR"\fR
.br
.B ask
\fB\-\-save\-general\fR \fI"TEXTO A GUARDAR"\fR
.br
.B ask
\fB\-\-append\-general\fR \fI"TEXTO A AGREGAR"\fR
.br
.B ask
[\fB\-\-help\fR | \fB\-h\fR]


.SH DESCRIPTION
\fBask\fR es una herramienta de línea de comandos para enviar preguntas a la API de Gemini 2.0 Flash de Google y recibir respuestas.
Permite incluir contenido de archivos, usar contextos predefinidos (locales al directorio actual o generales),
y mantener un historial de conversación por directorio.

.SH COMANDOS DE ACCIÓN
Estos comandos no realizan una consulta a la API de Gemini.
.TP
\fB\-\-clean\fR \fIOBJETIVO\fR
Borra archivos de configuración o memoria. \fIOBJETIVO\fR puede ser:
.RS
.TP
\fBlocal\-context\fR
Borra \fB.ask_context.local\fR del directorio actual.
.TP
\fBgeneral\-context\fR
Borra \fB.ask_context.general\fR del directorio del script.
.TP
\fBmemory\fR
Borra \fB.ask_memory.jsonl\fR del directorio actual.
.TP
\fBall\fR
Borra los tres archivos anteriores.
.RE
.TP
\fB\-\-save\-local\fR \fI"TEXTO A GUARDAR"\fR
Sobrescribe (o crea) \fB.ask_context.local\fR en el directorio actual con el \fITEXTO\fR proporcionado.
.TP
\fB\-\-append\-local\fR \fI"TEXTO A AGREGAR"\fR
Agrega \fITEXTO\fR al final de \fB.ask_context.local\fR. Si el archivo no existe, lo crea.
.TP
\fB\-\-save\-general\fR \fI"TEXTO A GUARDAR"\fR
Sobrescribe (o crea) \fB.ask_context.general\fR en el directorio del script con el \fITEXTO\fR proporcionado.
.TP
\fB\-\-append\-general\fR \fI"TEXTO A AGREGAR"\fR
Agrega \fITEXTO\fR al final de \fB.ask_context.general\fR. Si el archivo no existe, lo crea.

.SH OPCIONES DE CONSULTA
Estas opciones modifican cómo se realiza la consulta a Gemini.
.TP
\fB\-\-file\fR \fIRUTA_ARCHIVO\fR
Incluye el contenido del archivo especificado en el prompt enviado a Gemini.
.TP
\fB\-\-load\-general\-context\fR
Carga el contenido de \fB.ask_context.general\fR (ubicado en el directorio del script \fBask\fR) y lo antepone al prompt.
.TP
\fB\-\-no\-local\-context\fR
Evita que se cargue automáticamente el archivo \fB.ask_context.local\fR del directorio actual.
.TP
\fB\-\-no\-memory\fR
Evita cargar el historial de conversación desde \fB.ask_memory.jsonl\fR y no guarda la interacción actual.
.TP
\fB\-\-debug\fR
Activa la salida de depuración detallada para el script de Python subyacente.
.TP
\fB\-\-help, \-h\fR
Muestra este mensaje de ayuda y sale.

.SH ARGUMENTOS
.TP
\fIPREGUNTA_O_TEXTO\fR
Si no se usa un comando de acción como \fB\-\-clean\fR, \fB\-\-save\-*\fR, o \fB\-\-append\-*\fR, este es el prompt o pregunta que se envía a Gemini.
Si se usa \fB\-\-save\-*\fR o \fB\-\-append\-*\fR, este argumento no se usa (el texto viene del propio flag). \fINota:\fR En la versión actual, los flags como \-\-save\-local toman el texto como su propio argumento, no de los argumentos posicionales. (Esta parte necesita revisión basada en la implementación final de argparse en Python).

.SH ARCHIVOS
.TP
\fB~/.config/ask/.ask_context.general\fR (o \fI<directorio_script>\fB/.ask_context.general\fR)
Archivo de contexto general. La ubicación exacta depende de cómo se configure \fBGENERAL_CONTEXT_FILEPATH\fR en el script de Python.
.TP
\fB./.ask_context.local\fR
Archivo de contexto local, específico del directorio actual.
.TP
\fB./.ask_memory.jsonl\fR
Archivo de historial de conversación, específico del directorio actual.

.SH ENTORNO
.TP
\fBGEMINI_API_KEY\fR
Debe estar configurada con tu clave API de Google Gemini para que el script funcione.
Ejemplo: \fBexport GEMINI_API_KEY='tu_clave_api'\fR
.TP
\fBASK_DEBUG\fR
Si se establece a \fBtrue\fR o \fB1\fR, activa la salida de depuración (similar a \fB\-\-debug\fR).

.SH DEPENDENCIAS
Python 3, y las librerías de Python \fBrequests\fR.
También requiere los comandos \fBglow\fR, \fBcurl\fR, \fBjq\fR (para el wrapper de Bash si se modifica), e \fBiconv\fR (generalmente provisto por \fBglibc\fR).

.SH EJEMPLOS
.TP
\fBask \"Traduce 'hola mundo' al inglés\"\fR
Consulta simple a Gemini.
.TP
\fBask --file mi_codigo.py \"Explica este código Python\"\fR
Consulta a Gemini sobre el contenido de un archivo.
.TP
\fBask --save-local \"Para este proyecto, actúa como un experto en Rust.\"\fR
Guarda un contexto local.
.TP
\fBask --append-local \"Y siempre proporciona ejemplos de código.\"\fR
Agrega al contexto local existente.
.TP
\fBask --clean memory\fR
Borra el historial de conversación del directorio actual.

.SH AUTOR
Tu Nombre <tu_email@example.com>

.SH BUGS
Reporta bugs a <tu_email@example.com> o en <https://github.com/tu_usuario/tu_repo_ask/issues>.